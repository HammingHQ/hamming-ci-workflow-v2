name: Smoke Test Example

on:
  push:
    branches: [main]
  schedule:
    - cron: '0 */6 * * *'  # Every 6 hours
  workflow_dispatch:  # Allow manual trigger

jobs:
  smoke-test:
    uses: ./.github/workflows/hamming_run_test.yml
    with:
      # These values can be hardcoded or use repository variables
      agent_id: ${{ vars.SMOKE_TEST_AGENT_ID }}  # Repository variable for smoke test
      phone_numbers: ${{ vars.SMOKE_TEST_PHONE_NUMBERS }}  # Repository variable for smoke test
      tag_ids: ${{ vars.SMOKE_TEST_TAGS }}  # Repository variable for smoke test
      timeout_seconds: "900"
      min_test_pass_rate: "0.8"        # 80% of test cases must pass
      min_assertion_pass_rate: "0.9"   # 90% assertion score required
    secrets:
      # This must be a repository secret
      HAMMING_API_KEY: ${{ secrets.HAMMING_API_KEY }}